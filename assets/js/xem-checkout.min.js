!function(e){var t={init:function(){e.initialize("#xem-qr",function(){e("#xem-form").length&&(this.form=e("#xem-form"),this.email=this.form.data("email"),this.amount=this.form.data("amount"),this.currency=this.form.data("currency"),this.xemAddress=this.form.data("xem-address"),this.xemAmount=this.form.data("xem-amount"),this.xemRef=this.form.data("xem-ref"),this.infoWrapper="#xem-info",this.amountWrapper="#xem-amount-wrapper",this.process="#xem-process"),this.paymentData={v:wc_xem_params.test?1:2,type:2,data:{addr:this.xemAddress.toUpperCase().replace(/-/g,""),amount:1e6*this.xemAmount,msg:this.xemRef,name:"XEM payment to "+wc_xem_params.store}},new QRCode("xem-qr",{text:JSON.stringify(this.paymentData),size:256,fill:"#000",quiet:0,ratio:2}),Clipboard.isSupported()&&(new Clipboard("#xem-amount-wrapper"),new Clipboard("#xem-address-wrapper"),new Clipboard("#xem-ref-wrapper")),e("div.payment_box.payment_method_xem").is(":visible")?e("#place_order").attr("disabled",!0):e("#place_order").attr("disabled",!1),e(".wc_payment_methods  > li").on("click",'input[name="payment_method"]',function(){e(this).is("#payment_method_xem")?e("#place_order").attr("disabled",!0):e("#place_order").attr("disabled",!1)});var a={classname:"nanobar-xem",id:"xem-nanobar",target:document.getElementById("xem-process")};t.nanobar=new Nanobar(a)})},updateXemAmount:function(){this.ajaxGetXemAmount().done(function(t){console.log(t),!0===t.success&&t.data.amount>0&&e(this.amountWrapper).text(t.data.amount)})},checkForXemPayment:function(){this.nanobar.go(25),e.ajax({url:wc_xem_params.wc_ajax_url,type:"post",data:{action:"woocommerce_check_for_payment",nounce:wc_xem_params.nounce}}).done(function(a){e("#xem-check").html('<p id="xem-check">Checking..</p>'),!0===a.success&&!0===a.data.match&&(e("#place_order").attr("disabled",!1),e("#place_order").trigger("click")),setTimeout(function(){t.checkForXemPayment()},5e3)}),this.nanobar.go(100)},ajaxGetXemAmount:function(){return e.ajax({url:wc_xem_params.wc_ajax_url,type:"post",data:{action:"woocommerce_get_xem_amount",nounce:wc_xem_params.nounce}})}};t.init(),setTimeout(function(){t.checkForXemPayment()},5e3)}(jQuery);
//# sourceMappingURL=maps/xem-checkout.min.js.map
